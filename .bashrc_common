# ~/config/.bashrc_common
# Interactive shell settings for UNIX-like systems
# 
# Note: this file must use unix line endings (LF)!
if [ -z ${VB:+dummy} ]; then
    export VB=false
else
    if $VB; then
	# set tab
	TAB+=${TAB+${fTAB:='   '}}
	# load formatting
	fpretty=${HOME}/utils/bash/.bashrc_pretty
	if [ -e $fpretty ]; then
	    source $fpretty
	fi
	# print source name at start
	echo -e "${TAB}running ${PSDIR}$BASH_SOURCE${NORMAL}..."
	src_name=$(readlink -f $BASH_SOURCE)
	if [ ! "$BASH_SOURCE" = "$src_name" ]; then
	    echo -e "${TAB}${VALID}link${NORMAL} -> $src_name"
	fi
    fi
fi

# Settings
# Commands to save
export HISTFILESIZE=
export HISTSIZE=
# Don't put duplicate lines in the history
export HISTCONTROL=ignoredups
export HISTIGNORE=$'bg:exit:ls:pwd:history:la:lt:gits:gitd:git status:git log:git diff'
# Realtime history
shopt -s histappend
PROMPT_COMMAND="history -a;$PROMPT_COMMAND"
# Timestamp history
HISTTIMEFORMAT="%F %T "
# Editors
export EDITOR='emacs -nw'
export GIT_EDITOR='emacs -nw'
export SVN_EDITOR=emacs
set -o emacs

# Aliases and Functions
falias="${HOME}/config/.bash_aliases"
if [ -f $falias ]; then
    source $falias
fi

# Path additions
if $VB; then
    echo "${TAB}Path additions..."
    TAB+=${fTAB:='   '}
fi

ADDPATH=${HOME}/bin
if [[ ":$PATH" != *":${ADDPATH}"*  ]]; then
    if [ -d "${ADDPATH}" ] ; then
	vecho -n "${TAB}appending ${ADDPATH} to PATH... "
	#vecho -n "${TAB}prepending ${ADDPATH} to PATH... "
	export PATH=$PATH:$ADDPATH
	#export PATH=$ADDPATH:$PATH
	vecho "done"
    else
	echo "${TAB}${ADDPATH} not found"
    fi
else
    vecho "${TAB}${ADDPATH} already in PATH"
fi

if $VB; then
    TAB=${TAB%$fTAB} # once for path
    TAB=${TAB%$fTAB} # once for file
fi
